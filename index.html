

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 6 Computer Science Diagnostic Assessment</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom right, #008080, #004d4d);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        .container {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 80%;
            max-width: 800px;
            margin: 20px;
        }
        .logo {
            display: block;
            margin: 0 auto 20px auto;
            max-width: 150px;
        }
        .title-page, .quiz-page, .result-page {
            display: none;
            text-align: center;
        }
        .title-page {
            display: block;
        }
        h1, h2, h3 {
            color: #ccff90;
        }
        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .input-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #008080;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover:not(:disabled) {
            background-color: #004d4d;
        }
        button:disabled {
            background-color: #555;
            cursor: not-allowed;
        }
        .question {
            margin-bottom: 20px;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            text-align: left;
        }
        .options label {
            display: block;
            margin: 10px 0;
            cursor: pointer;
        }
        .matching-pair {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            align-items: center;
        }
        .matching-pair select {
            width: 45%;
            padding: 5px;
            border-radius: 5px;
        }
        .report-section {
            text-align: left;
            margin-top: 20px;
        }
        .report-section .feedback-section {
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .report-section .strength {
            background-color: #006400;
        }
        .report-section .weakness {
            background-color: #8B0000;
        }
        .report-section .feedback-box {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .modal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #333;
            padding: 20px;
            border-radius: 10px;
            width: 80%;
            max-width: 400px;
            text-align: center;
        }
        .modal-content button {
            margin-top: 15px;
        }
        pre code {
            display: block;
            padding: 10px;
            background-color: #222;
            border-radius: 5px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title-page" id="title-page">
            <img src="https://storage.googleapis.com/yaschools/schools-logo/148544809806-19-2025-10-34-06.jpg" alt="School Logo" class="logo">
            <h1>Grade 6 â€“ Computer Science<br>Diagnostic Assessment</h1>
            <p>Teacher Name: Mr. Usama Ibnzaid</p>
            <div class="input-group">
                <label for="studentName">Student Full Name:</label>
                <input type="text" id="studentName" required>
            </div>
            <button onclick="startAssessment()">Start Assessment</button>
        </div>
        <div class="quiz-page" id="quiz-page">
            <h2 id="question-counter">Question 1 of 30</h2>
            <div id="question-container"></div>
            <button onclick="previousQuestion()" id="previous-button" style="display: none;">Previous</button>
            <button onclick="nextQuestion()" id="next-button">Next</button>
            <button onclick="submitAssessment()" style="display: none;" id="submit-button">Submit Assessment</button>
        </div>
        <div class="result-page" id="result-page">
            <h2>Assessment Report</h2>
            <p>Student: <span id="student-name-result"></span></p>
            <p>Your Score: <span id="score"></span> / 30</p>
            <div class="report-section">
                <h3>Strengths & Weaknesses</h3>
                <div id="strengths-weaknesses"></div>
                <h3>Constructive Feedback & Recommendations</h3>
                <p id="feedback"></p>
                <h3>Formal Written Report to Parent/Guardian</h3>
                <p id="parent-report"></p>
            </div>
            <button onclick="downloadReport()">Download the Report</button>
        </div>
    </div>
    <div id="alertModal" class="modal" style="display:none;">
        <div class="modal-content">
            <p id="modal-message"></p>
            <button onclick="closeModal()">OK</button>
        </div>
    </div>
    <script>
        // Updated quiz data with 30 questions and diverse types
        const quizData = [
            { type: "multiple-choice", question: "1. Which of these is a computer part you can touch?", options: ["Software", "Hardware", "Data", "Virus"], answer: "Hardware", topic: "Hardware" },
            { type: "checkbox", question: "2. Which of these are input devices? (Select all that apply)", options: ["Keyboard", "Mouse", "Printer", "Monitor", "Webcam"], answer: ["Keyboard", "Mouse", "Webcam"], topic: "Hardware" },
            { type: "fill-in-the-blank", question: "3. The main screen you see when you turn on a computer is called the _________.", answer: "desktop", topic: "Software" },
            { type: "matching", question: "4. Match the internet term to its description.", pairs: [{ left: "URL", right: ["Website address", "A picture file"] }, { left: "Download", right: ["Getting a file from the internet", "Sending a file to the internet"] }], answers: { "URL": "Website address", "Download": "Getting a file from the internet" }, topic: "Internet" },
            { type: "short-answer", question: "5. What is an 'app' short for?", answer: "Application", topic: "Software" },
            { type: "case-study", question: "6. **Case Study:** Sarah wants to create a simple program that tells a robot to move forward 3 steps. What type of instructions would she use?", answer: "A sequence of commands.", topic: "Programming" },
            { type: "dropdown", question: "7. The brain of the computer is the:", options: ["Monitor", "Keyboard", "CPU", "Hard Drive"], answer: "CPU", topic: "Hardware" },
            { type: "true-false", question: "8. A computer virus is a type of harmful software.", answer: "True", topic: "Digital Citizenship" },
            { type: "fill-in-the-gap", question: "9. To keep your online accounts safe, you should use a strong _________ with a mix of letters, numbers, and symbols.", answer: "password", topic: "Digital Citizenship" },
            { type: "matching", question: "10. Match the programming concept to its definition.", pairs: [{ left: "Loop", right: ["Repeating a set of instructions", "A step-by-step set of instructions"] }, { left: "Algorithm", right: ["A step-by-step set of instructions", "Repeating a set of instructions"] }], answers: { "Loop": "Repeating a set of instructions", "Algorithm": "A step-by-step set of instructions" }, topic: "Programming" },
            { type: "short-answer", question: "11. What is the purpose of a 'search engine'?", answer: "To find information on the internet.", topic: "Internet" },
            { type: "case-study", question: "12. **Case Study:** Mark is playing an online game. Another player is saying mean things to him. What should Mark do?", answer: "Tell a trusted adult, block the player, and not respond.", topic: "Digital Citizenship" },
            { type: "multiple-choice", question: "13. What is a 'digital footprint'?", options: ["A mark left by a computer mouse", "The trail of data we leave online", "A type of keyboard", "A computer game"], answer: "The trail of data we leave online", topic: "Digital Citizenship" },
            { type: "true-false", question: "14. An algorithm is a set of instructions to solve a problem.", answer: "True", topic: "Programming" },
            { type: "fill-in-the-gap", question: "15. An operating system, like Windows or macOS, is a type of _________.", answer: "software", topic: "Software" },
            { type: "matching", question: "16. Match the file extension to its type.", pairs: [{ left: ".png", right: ["Image file", "Document file"] }, { left: ".docx", right: ["Document file", "Image file"] }], answers: { ".png": "Image file", ".docx": "Document file" }, topic: "File Management" },
            { type: "short-answer", question: "17. What does 'copy and paste' do?", answer: "It duplicates text or a picture from one place to another.", topic: "Software" },
            { type: "case-study", question: "18. **Case Study:** A student wants to save a picture from the internet to their computer to use in a presentation. What is the best command to use?", answer: "Right-click and choose 'Save Image As...'.", topic: "Internet" },
            { type: "multiple-choice", question: "19. Which of these is an example of a social media site?", options: ["Google", "Facebook", "Amazon", "Netflix"], answer: "Facebook", topic: "Digital Citizenship" },
            { type: "checkbox", question: "20. Which of these are output devices? (Select all that apply)", options: ["Mouse", "Speaker", "Printer", "Monitor"], answer: ["Speaker", "Printer", "Monitor"], topic: "Hardware" },
            { type: "fill-in-the-gap", question: "21. A _________ is a program that lets you surf the internet.", answer: "web browser", topic: "Internet" },
            { type: "matching", question: "22. Match the type of device to its function.", pairs: [{ left: "Printer", right: ["Produces a hard copy", "Shows images on a screen"] }, { left: "Webcam", right: ["Captures video", "Produces a hard copy"] }], answers: { "Printer": "Produces a hard copy", "Webcam": "Captures video" }, topic: "Hardware" },
            { type: "short-answer", question: "23. What is 'cyberbullying'?", answer: "Using technology to hurt or scare someone.", topic: "Digital Citizenship" },
            { type: "case-study", question: "24. **Case Study:** You need to write a simple program that will count from 1 to 10. What programming concept would be most useful?", answer: "A loop or a repeat block.", topic: "Programming" },
            { type: "multiple-choice", question: "25. The process of giving a computer a set of instructions is called:", options: ["Typing", "Saving", "Programming", "Uploading"], answer: "Programming", topic: "Programming" },
            { type: "dropdown", question: "26. What does 'URL' stand for?", options: ["Universal Resource Link", "Uniform Resource Locator", "United Resource Link", "User's Resource Locator"], answer: "Uniform Resource Locator", topic: "Internet" },
            { type: "fill-in-the-gap", question: "27. To protect your computer from viruses, you should use an _________ program.", answer: "antivirus", topic: "Digital Citizenship" },
            { type: "matching", question: "28. Match the device to its category.", pairs: [{ left: "Microphone", right: ["Input device", "Output device"] }, { left: "Headphones", right: ["Output device", "Input device"] }], answers: { "Microphone": "Input device", "Headphones": "Output device" }, topic: "Hardware" },
            { type: "short-answer", question: "29. What is 'netiquette'?", answer: "The rules for good behavior online.", topic: "Digital Citizenship" },
            { type: "programming", question: "30. **Programming Question:** What is the output of this simple block-based code?", code: "Set `x` to 5.\nChange `x` by 2.\nChange `x` by 3.\nPrint `x`.", answer: "10", topic: "Programming" }
        ];

        // State variables for the quiz
        let currentQuestionIndex = 0;
        let score = 0;
        const userAnswers = {};
        let studentName = "";

        // Get DOM elements
        const titlePage = document.getElementById('title-page');
        const quizPage = document.getElementById('quiz-page');
        const resultPage = document.getElementById('result-page');
        const questionContainer = document.getElementById('question-container');
        const questionCounter = document.getElementById('question-counter');
        const submitButton = document.getElementById('submit-button');
        const nextButton = document.getElementById('next-button');
        const previousButton = document.getElementById('previous-button');
        const alertModal = document.getElementById('alertModal');
        const modalMessage = document.getElementById('modal-message');

        /**
         * Starts the assessment, checks for student name, and displays the first question.
         */
        function startAssessment() {
            studentName = document.getElementById('studentName').value.trim();
            if (!studentName) {
                showModal("Please enter your full name to start the assessment.");
                return;
            }
            document.getElementById('student-name-result').textContent = studentName;
            titlePage.style.display = 'none';
            quizPage.style.display = 'block';
            loadQuestion();
        }

        /**
         * Renders the current question based on the `currentQuestionIndex`.
         */
        function loadQuestion() {
            if (currentQuestionIndex < 0) currentQuestionIndex = 0;
            if (currentQuestionIndex >= quizData.length) currentQuestionIndex = quizData.length - 1;

            const q = quizData[currentQuestionIndex];
            questionCounter.textContent = `Question ${currentQuestionIndex + 1} of ${quizData.length}`;
            questionContainer.innerHTML = '';

            const questionDiv = document.createElement('div');
            questionDiv.classList.add('question');

            let questionHTML = `<h4>${q.question}</h4>`;
            if (q.type === 'programming') {
                questionHTML += `<pre><code>${q.code}</code></pre>`;
            }
            questionDiv.innerHTML = questionHTML;

            // Render different question types and add event listeners
            const optionsDiv = document.createElement('div');
            optionsDiv.classList.add('options');
            if (q.type === 'multiple-choice' || q.type === 'true-false' || q.type === 'dropdown') {
                const isDropdown = q.type === 'dropdown';
                const inputType = isDropdown ? 'select' : 'radio';
                if (isDropdown) {
                    const select = document.createElement('select');
                    select.name = 'answer';
                    select.id = 'dropdown-answer';
                    select.onchange = checkAnswerStatus;
                    const defaultOption = document.createElement('option');
                    defaultOption.value = "";
                    defaultOption.textContent = "-- Select --";
                    select.appendChild(defaultOption);
                    q.options.forEach(option => {
                        const optionElement = document.createElement('option');
                        optionElement.value = option;
                        optionElement.textContent = option;
                        select.appendChild(optionElement);
                    });
                    optionsDiv.appendChild(select);
                } else {
                    (q.options || ["True", "False"]).forEach(option => {
                        const inputId = `q${currentQuestionIndex}-opt-${option.replace(/\s+/g, '-')}`;
                        optionsDiv.innerHTML += `
                            <label for="${inputId}">
                                <input type="radio" name="answer" id="${inputId}" value="${option}" onchange="checkAnswerStatus()"> ${option}
                            </label>
                        `;
                    });
                }
                questionDiv.appendChild(optionsDiv);
                if (userAnswers[currentQuestionIndex]) {
                    if (isDropdown) {
                        document.getElementById('dropdown-answer').value = userAnswers[currentQuestionIndex];
                    } else {
                        const savedAnswer = userAnswers[currentQuestionIndex];
                        const selectedInput = document.querySelector(`input[name="answer"][value="${savedAnswer}"]`);
                        if (selectedInput) {
                            selectedInput.checked = true;
                        }
                    }
                }
            } else if (q.type === 'checkbox') {
                q.options.forEach(option => {
                    const inputId = `q${currentQuestionIndex}-opt-${option.replace(/\s+/g, '-')}`;
                    optionsDiv.innerHTML += `
                        <label for="${inputId}">
                            <input type="checkbox" name="answer" id="${inputId}" value="${option}" onchange="checkAnswerStatus()"> ${option}
                        </label>
                    `;
                });
                questionDiv.appendChild(optionsDiv);
                if (userAnswers[currentQuestionIndex]) {
                    const savedAnswers = userAnswers[currentQuestionIndex];
                    savedAnswers.forEach(answer => {
                        const selectedInput = document.querySelector(`input[name="answer"][value="${answer}"]`);
                        if (selectedInput) {
                            selectedInput.checked = true;
                        }
                    });
                }
            } else if (q.type === 'fill-in-the-blank' || q.type === 'fill-in-the-gap' || q.type === 'short-answer' || q.type === 'case-study' || q.type === 'programming') {
                const input = document.createElement('input');
                input.type = 'text';
                input.placeholder = 'Type your answer here...';
                input.id = 'text-answer';
                input.style.width = 'calc(100% - 22px)';
                input.setAttribute('oninput', 'checkAnswerStatus()');
                if (userAnswers[currentQuestionIndex]) {
                    input.value = userAnswers[currentQuestionIndex];
                }
                questionDiv.appendChild(input);
            } else if (q.type === 'matching') {
                const matchingDiv = document.createElement('div');
                matchingDiv.id = 'matching-options';
                q.pairs.forEach((pair, index) => {
                    const pairDiv = document.createElement('div');
                    pairDiv.classList.add('matching-pair');
                    const selectId = `matching-${currentQuestionIndex}-${index}`;
                    pairDiv.innerHTML = `
                        <span>${pair.left}</span>
                        <select id="${selectId}" onchange="checkAnswerStatus()">
                            <option value="">-- Select --</option>
                            ${pair.right.map(r => `<option value="${r}">${r}</option>`).join('')}
                        </select>
                    `;
                    matchingDiv.appendChild(pairDiv);
                    setTimeout(() => {
                        if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex][pair.left]) {
                            document.getElementById(selectId).value = userAnswers[currentQuestionIndex][pair.left];
                        }
                    }, 0);
                });
                questionDiv.appendChild(matchingDiv);
            }

            questionContainer.appendChild(questionDiv);

            previousButton.style.display = currentQuestionIndex > 0 ? 'inline-block' : 'none';
            if (currentQuestionIndex === quizData.length - 1) {
                nextButton.style.display = 'none';
                submitButton.style.display = 'inline-block';
            } else {
                nextButton.style.display = 'inline-block';
                submitButton.style.display = 'none';
            }
            checkAnswerStatus();
        }

        /**
         * Checks if the current question has been answered and enables the next/submit button.
         */
        function checkAnswerStatus() {
            const q = quizData[currentQuestionIndex];
            let isAnswered = false;

            if (q.type === 'multiple-choice' || q.type === 'true-false') {
                isAnswered = document.querySelector(`input[name="answer"]:checked`) !== null;
            } else if (q.type === 'checkbox') {
                const checked = document.querySelectorAll(`input[name="answer"]:checked`);
                isAnswered = checked.length > 0;
            } else if (q.type === 'fill-in-the-blank' || q.type === 'fill-in-the-gap' || q.type === 'short-answer' || q.type === 'case-study' || q.type === 'programming') {
                const textInput = document.getElementById('text-answer');
                isAnswered = textInput.value.trim() !== '';
            } else if (q.type === 'matching' || q.type === 'dropdown') {
                isAnswered = true;
                if (q.type === 'matching') {
                    const selects = document.querySelectorAll(`#matching-options select`);
                    selects.forEach(select => {
                        if (select.value === "") {
                            isAnswered = false;
                        }
                    });
                } else if (q.type === 'dropdown') {
                    isAnswered = document.getElementById('dropdown-answer').value !== "";
                }
            }

            if (currentQuestionIndex === quizData.length - 1) {
                submitButton.disabled = !isAnswered;
            } else {
                nextButton.disabled = !isAnswered;
            }
        }

        /**
         * Saves the current answer and moves to the next question.
         */
        function nextQuestion() {
            if (!isCurrentQuestionAnswered()) {
                showModal("Please answer the current question before proceeding.");
                return;
            }
            saveAnswer();
            currentQuestionIndex++;
            loadQuestion();
        }

        /**
         * Saves the current answer and moves to the previous question.
         */
        function previousQuestion() {
            saveAnswer();
            currentQuestionIndex--;
            loadQuestion();
        }

        /**
         * Checks if the current question has been answered.
         */
        function isCurrentQuestionAnswered() {
            const q = quizData[currentQuestionIndex];
            if (q.type === 'multiple-choice' || q.type === 'true-false') {
                return document.querySelector(`input[name="answer"]:checked`) !== null;
            } else if (q.type === 'checkbox') {
                return document.querySelectorAll(`input[name="answer"]:checked`).length > 0;
            } else if (q.type === 'fill-in-the-blank' || q.type === 'fill-in-the-gap' || q.type === 'short-answer' || q.type === 'case-study' || q.type === 'programming') {
                const textInput = document.getElementById('text-answer');
                return textInput.value.trim() !== '';
            } else if (q.type === 'matching') {
                const selects = document.querySelectorAll(`#matching-options select`);
                let answered = true;
                selects.forEach(select => {
                    if (select.value === "") {
                        answered = false;
                    }
                });
                return answered;
            } else if (q.type === 'dropdown') {
                return document.getElementById('dropdown-answer').value !== "";
            }
            return false;
        }

        /**
         * Saves the user's answer for the current question.
         */
        function saveAnswer() {
            const q = quizData[currentQuestionIndex];
            if (q.type === 'multiple-choice' || q.type === 'true-false') {
                const selected = document.querySelector(`input[name="answer"]:checked`);
                if (selected) {
                    userAnswers[currentQuestionIndex] = selected.value;
                }
            } else if (q.type === 'checkbox') {
                const checked = document.querySelectorAll(`input[name="answer"]:checked`);
                userAnswers[currentQuestionIndex] = Array.from(checked).map(c => c.value).sort();
            } else if (q.type === 'fill-in-the-blank' || q.type === 'fill-in-the-gap' || q.type === 'short-answer' || q.type === 'case-study' || q.type === 'programming') {
                const textInput = document.getElementById('text-answer');
                userAnswers[currentQuestionIndex] = textInput.value.trim();
            } else if (q.type === 'matching') {
                const matchingAnswers = {};
                q.pairs.forEach((pair, index) => {
                    const select = document.getElementById(`matching-${currentQuestionIndex}-${index}`);
                    matchingAnswers[pair.left] = select.value;
                });
                userAnswers[currentQuestionIndex] = matchingAnswers;
            } else if (q.type === 'dropdown') {
                userAnswers[currentQuestionIndex] = document.getElementById('dropdown-answer').value;
            }
        }

        /**
         * Handles the submission of the assessment.
         */
        function submitAssessment() {
            if (!isCurrentQuestionAnswered()) {
                showModal("Please answer the current question before submitting.");
                return;
            }
            saveAnswer();
            quizPage.style.display = 'none';
            resultPage.style.display = 'block';
            evaluateAnswers();
            generateReport();
        }

        /**
         * Compares user answers to correct answers and calculates the score.
         */
        function evaluateAnswers() {
            score = 0;
            quizData.forEach((q, index) => {
                const userAnswer = userAnswers[index];
                if (q.type === 'multiple-choice' || q.type === 'true-false' || q.type === 'dropdown') {
                    if (userAnswer === q.answer) {
                        score++;
                    }
                } else if (q.type === 'checkbox') {
                    if (userAnswer && JSON.stringify(userAnswer.sort()) === JSON.stringify(q.answer.sort())) {
                        score++;
                    }
                } else if (q.type === 'fill-in-the-blank' || q.type === 'fill-in-the-gap' || q.type === 'short-answer' || q.type === 'case-study' || q.type === 'programming') {
                    if (userAnswer && userAnswer.toLowerCase().replace(/\./g, '') === q.answer.toLowerCase().replace(/\./g, '')) {
                        score++;
                    }
                } else if (q.type === 'matching') {
                    let correctPairs = 0;
                    let totalPairs = Object.keys(q.answers).length;
                    for (const key in q.answers) {
                        if (userAnswer && userAnswer[key] && userAnswer[key] === q.answers[key]) {
                            correctPairs++;
                        }
                    }
                    if (correctPairs === totalPairs) {
                        score++;
                    }
                }
            });
            document.getElementById('score').textContent = score;
        }

        /**
         * Generates the personalized report for the student.
         */
        function generateReport() {
            const topicScores = {};
            const topicCounts = {};

            quizData.forEach((q, index) => {
                const topic = q.topic;
                const userAnswer = userAnswers[index];
                if (!topicScores[topic]) {
                    topicScores[topic] = 0;
                    topicCounts[topic] = 0;
                }
                topicCounts[topic]++;

                if (q.type === 'multiple-choice' || q.type === 'true-false' || q.type === 'dropdown') {
                    if (userAnswer === q.answer) {
                        topicScores[topic]++;
                    }
                } else if (q.type === 'checkbox') {
                    if (userAnswer && JSON.stringify(userAnswer.sort()) === JSON.stringify(q.answer.sort())) {
                        topicScores[topic]++;
                    }
                } else if (q.type === 'fill-in-the-blank' || q.type === 'fill-in-the-gap' || q.type === 'short-answer' || q.type === 'case-study' || q.type === 'programming') {
                    if (userAnswer && userAnswer.toLowerCase().replace(/\./g, '') === q.answer.toLowerCase().replace(/\./g, '')) {
                        topicScores[topic]++;
                    }
                } else if (q.type === 'matching') {
                    let correctPairs = 0;
                    let totalPairs = Object.keys(q.answers).length;
                    for (const key in q.answers) {
                        if (userAnswer && userAnswer[key] && userAnswer[key] === q.answers[key]) {
                            correctPairs++;
                        }
                    }
                    if (correctPairs === totalPairs) {
                        topicScores[topic]++;
                    }
                }
            });

            let strengthsHTML = '<h4>Strengths</h4><p>Based on the performance, the student has demonstrated a strong understanding of the following areas:</p><ul>';
            let weaknessesHTML = '<h4>Weaknesses</h4><p>Additional practice is recommended in the following topics:</p><ul>';
            let feedback = 'Overall, the student has shown a good understanding of the material. ';
            let parentReport = `Dear Parent/Guardian,

This report summarizes your child's performance on the Grade 6 Computer Science diagnostic assessment.

**Summary of Results:**
Your child, ${studentName}, scored ${score} out of ${quizData.length}.

**Strengths:**
`;
            let strongTopics = [];
            let weakTopics = [];
            for (const topic in topicScores) {
                const percentage = (topicScores[topic] / topicCounts[topic]) * 100;
                if (percentage >= 80) {
                    strongTopics.push(topic);
                } else if (percentage < 50) {
                    weakTopics.push(topic);
                }
            }

            if (strongTopics.length > 0) {
                strengthsHTML += `<li>${strongTopics.join('</li><li>')}</li>`;
                feedback += `The student performed exceptionally well in **${strongTopics.join(', ')}**.`;
                parentReport += `- ${strongTopics.join('\n- ')}\n`;
            } else {
                strengthsHTML += '<li>No specific strengths identified. Continued practice is encouraged.</li>';
                feedback += 'Continued practice across all topics will help to build a stronger foundation.';
                parentReport += `- No specific strengths were identified.`;
            }
            strengthsHTML += '</ul>';

            parentReport += `\n**Areas for Development:**\n`;
            if (weakTopics.length > 0) {
                weaknessesHTML += `<li>${weakTopics.join('</li><li>')}</li>`;
                feedback += ` It is recommended that the student receive additional support in **${weakTopics.join(', ')}**.`;
                parentReport += `- ${weakTopics.join('\n- ')}\n`;
            } else {
                weaknessesHTML += '<li>No specific weaknesses identified.</li>';
                feedback += 'The student has a good grasp of the foundational concepts.';
                parentReport += `- The student has a solid understanding of the concepts with no specific weak areas identified.`;
            }
            weaknessesHTML += '</ul>';

            parentReport += `\n**Recommendations:**
Based on these results, we recommend focusing on the areas for development. Reinforcing concepts through interactive activities and practical exercises can be very effective.

If you have any questions, please feel free to contact me.

Sincerely,
Mr. Usama Ibnzaid
`;

            document.getElementById('strengths-weaknesses').innerHTML = strengthsHTML + weaknessesHTML;
            document.getElementById('feedback').textContent = feedback;
            document.getElementById('parent-report').innerHTML = parentReport.replace(/\n/g, '<br>');
        }

        /**
         * Displays a modal with a given message.
         * @param {string} message - The message to display.
         */
        function showModal(message) {
            modalMessage.textContent = message;
            alertModal.style.display = 'flex';
        }

        /**
         * Closes the alert modal.
         */
        function closeModal() {
            alertModal.style.display = 'none';
        }

        /**
         * Downloads the generated report as a text file.
         */
        function downloadReport() {
            const reportContent = document.getElementById('parent-report').innerText;
            const blob = new Blob([reportContent], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `${studentName}_Computer_Science_Report.txt`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>
</html>
